{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_class_check_private_static_access.js","node_modules/@swc/helpers/lib/_class_apply_descriptor_get.js","node_modules/@swc/helpers/lib/_class_static_private_field_spec_get.js","src/js/api.js","node_modules/@swc/helpers/lib/_define_property.js","src/js/templates/gallery-template.js","src/js/templates/modal-template.js","src/index.js","src/js/modal.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCheckPrivateStaticAccess;\nfunction _classCheckPrivateStaticAccess(receiver, classConstructor) {\n    if (receiver !== classConstructor) {\n        throw new TypeError(\"Private static access of wrong provenance\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classApplyDescriptorGet;\nfunction _classApplyDescriptorGet(receiver, descriptor) {\n    if (descriptor.get) {\n        return descriptor.get.call(receiver);\n    }\n    return descriptor.value;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classStaticPrivateFieldSpecGet;\nvar _classCheckPrivateStaticAccess = _interopRequireDefault(require(\"./_class_check_private_static_access\"));\nvar _classApplyDescriptorGet = _interopRequireDefault(require(\"./_class_apply_descriptor_get\"));\nfunction _classStaticPrivateFieldSpecGet(receiver, classConstructor, descriptor) {\n    (0, _classCheckPrivateStaticAccess).default(receiver, classConstructor);\n    (0, _classCheckPrivateStaticAccess).default(descriptor, \"get\");\n    return (0, _classApplyDescriptorGet).default(receiver, descriptor);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","//* Тренди ->\n//* https://api.themoviedb.org/3/trending/all/day?api_key=9cca312caffd11f4ae9f11244d585025\n//* Один фільм по id ->\n//* https://api.themoviedb.org/3/movie/{movie_id}?api_key=9cca312caffd11f4ae9f11244d585025&language=en-US\n//* Пошук за ключовими словами ->\n//* https://api.themoviedb.org/3/search/movie?api_key=9cca312caffd11f4ae9f11244d585025&language=en-US&page=1\n\nexport class Fetch {\n  static #BASE_URL = 'https://api.themoviedb.org/3/';\n  static #API_KEY = '9cca312caffd11f4ae9f11244d585025';\n  static #TRENDING_MOVIES = 'trending/all/day';\n  static #MOVIE_BY_ID = 'movie/';\n  static #MOVIE_BY_KEYWORD = 'search/movie';\n\n  constructor() {\n    this._queryToFetch = '';\n    this._pageToFetch = 1;\n  }\n\n  async basicFetch(url) {\n    return await fetch(url)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.status);\n        }\n        return response.json();\n      })\n      .catch(error => {\n        console.log('error', error);\n      });\n  }\n\n  async fetchTrendingMovies() {\n    const url = `${Fetch.#BASE_URL}${Fetch.#TRENDING_MOVIES}?api_key=${\n      Fetch.#API_KEY\n    }&page=${this.pageToFetch}`;\n    return await this.basicFetch(url);\n  }\n\n  async fetchSearchMoviesByID(id) {\n    const url = `${Fetch.#BASE_URL}${Fetch.#MOVIE_BY_ID}${id}?api_key=${\n      Fetch.#API_KEY\n    }`;\n    return await this.basicFetch(url);\n  }\n\n  async fetchIDMoviesByKeyWord(keyword) {\n    const url = `${Fetch.#BASE_URL}${Fetch.#MOVIE_BY_KEYWORD}?api_key=${\n      Fetch.#API_KEY\n    }&page=${this.pageToFetch}&query=${keyword}`;\n    return await this.basicFetch(url);\n  }\n\n  resetPage() {\n    this._pageToFetch = 0;\n  }\n\n  get queryToFetch() {\n    return this._queryToFetch;\n  }\n\n  set queryToFetch(keyword) {\n    this._queryToFetch = keyword;\n  }\n\n  get pageToFetch() {\n    return this._pageToFetch;\n  }\n\n  set pageToFetch(num) {\n    this._pageToFetch = num;\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","export function galleryTemplate({\n  id,\n  poster_path,\n  title,\n  name,\n  release_date,\n  first_air_date,\n  genre_ids,\n}) {\n  if (!release_date && !first_air_date) return;\n  const url = `https://image.tmdb.org/t/p/original${poster_path}`;\n  const date = release_date || first_air_date;\n  const genres = genre_ids.join(',');\n\n  return `<li class=\"films-list__item\">\n    <article class=\"films-card\" id=${id}>\n    <div class=\"img-wrapper\">\n      <img width=\"395\" src=${url} alt=${title || name} />\n      </div>\n      <h2 class=\"films-card__title\">${title || name}</h2>\n      <p class=\"films-card__genre\">${genres} | ${date}</p>\n    </article>\n  </li>`;\n}\n","export function modalTemplate({\n  poster_path,\n  genres,\n  vote_average,\n  vote_count,\n  popularity,\n  original_title,\n  title,\n  overview,\n}) {\n  const url = `https://image.tmdb.org/t/p/original${poster_path}`;\n  const genresNames = genres.map(genre => genre.name).join(', ');\n\n  return `<div class=\"modal-movie\">\n  <button type=\"button\" class=\"modal-movie__close\">\n  <svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M8 8L22 22\" stroke=\"black\" stroke-width=\"2\"/>\n  <path d=\"M8 22L22 8\" stroke=\"black\" stroke-width=\"2\"/>\n  </svg>\n  </button>\n    <div class=\"modal__img-wrapper\">\n      <img width=\"375\" src=\"${url}\" alt=\"${title}\" />\n    </div>\n    <div class=\"modal-movie__descr\">      \n      <div class=\"modal-movie__info-weapper\">\n      <h2 class=\"modal-movie__title\">${title}</h2>  \n\n      <ul class=\"modal-movie__list list\">\n\n      <li class=\"modal-movie__item\">\n      <p class=\"modal-movie__key\">Vote / Votes </p>\n       <p class=\"modal-movie__value\">\n         <span class=\"modal-movie__value--accent\">${vote_average}</span> / ${vote_count}\n       </p>\n      </li>\n\n      <li class=\"modal-movie__item\">\n       <p class=\"modal-movie__key\">Popularity </p>\n       <p class=\"modal-movie__value\">${popularity}</p>\n      </li>\n\n      <li class=\"modal-movie__item\">\n      <p class=\"modal-movie__key\">Original Title </p>\n       <p class=\"modal-movie__value modal-movie__value--uppercase\">${original_title}</p>\n      </li>\n\n      <li class=\"modal-movie__item\">\n      <p class=\"modal-movie__key\">Genre </p>\n       <p class=\"modal-movie__value\">${genresNames}</p>\n      </li>\n      \n      </ul>  \n\n        <div class=\"modal-movie__about-wrapper\">\n        <p class=\"modal-movie__about\">About</p>\n        <p class=\"modal-movie__overview\">${overview}</p>\n        </div>\n        <div class=\"modal-movie__button-wrapper\">\n          <button class=\"modal-movie__btn\">add to Watched</button>\n          <button class=\"modal-movie__btn\">add to queue</button>\n        </div>\n      </div>\n    </div>\n  </div>`;\n}\n","import { Fetch } from './js/api';\nimport { Modal } from './js/modal';\nimport { galleryTemplate } from './js/templates/gallery-template';\nimport { modalTemplate } from './js/templates/modal-template';\n\nconst refs = {\n  movies: document.querySelector('.films-list'),\n  pagination: document.querySelector('.pagination-list'),\n};\n\nconst api = new Fetch();\nconst modal = new Modal({\n  onShow() {\n    window.addEventListener('keyup', onEscClose);\n  },\n  onClose() {\n    window.removeEventListener('keyup', onEscClose);\n  },\n});\n\nrefs.movies.addEventListener('click', onMovieClick);\n\ngetTranding();\n\nasync function getTranding() {\n  const movies = await api.fetchTrendingMovies();\n  const template = movies.results.map(galleryTemplate).join('');\n\n  refs.movies.innerHTML = template;\n  //   refs.pagination.innerHTML = ;\n}\n\nfunction onEscClose(e) {\n  console.log(e.code);\n  if (e.code !== 'Escape') return;\n  modal.close();\n}\n\nasync function onMovieClick(e) {\n  const article = e.target.closest('.films-card');\n  if (!article) return;\n\n  const movie = await api.fetchSearchMoviesByID(article.id);\n  const markup = modalTemplate(movie);\n  modal.open(markup);\n}\n","// document.body.style.overflow = '';\n\nexport class Modal {\n  constructor({ onShow, onClose }) {\n    this.onShow = onShow;\n    this.onClose = onClose;\n    this.elem = null;\n    this.closeIcon = null;\n  }\n  onClose() {}\n\n  open(markup) {\n    document.body.insertAdjacentHTML(\n      'beforeend',\n      `<div class=\"backdrop\">${markup}</div>`\n    );\n    document.body.style.overflow = 'hidden';\n    this.elem = document.querySelector('.backdrop');\n    this.closeIcon = document.querySelector('.modal-movie__close');\n\n    this.elem.addEventListener('click', this.onbackDropClose);\n    this.closeIcon.addEventListener('click', this.onCloseClick);\n    this.onShow();\n  }\n\n  close() {\n    const backdrop = document.querySelector('.backdrop');\n    backdrop.remove();\n\n    console.log('this.onClose();', this.onClose);\n    this.onClose();\n  }\n\n  onbackDropClose = e => {\n    if (!e.target.classList.contains('backdrop')) return;\n    this.close();\n  };\n\n  onCloseClick = e => {\n    this.close();\n  };\n}\n"],"names":["Object","defineProperty","module","exports","value","default","receiver","classConstructor","TypeError","descriptor","get","call","$cf6c6c300826f12e$exports","$cf6c6c300826f12e$var$_classCheckPrivateStaticAccess","$cf6c6c300826f12e$var$_classApplyDescriptorGet","$cf6c6c300826f12e$var$_interopRequireDefault","parcelRequire","obj","__esModule","$56ca17bb174b0ce3$export$1e7deca84b429035","async","url","fetch","then","response","ok","Error","status","json","catch","error","console","log","$parcel$interopDefault","$56ca17bb174b0ce3$var$_BASE_URL","$56ca17bb174b0ce3$var$_TRENDING_MOVIES","$56ca17bb174b0ce3$var$_API_KEY","this","pageToFetch","basicFetch","id","$56ca17bb174b0ce3$var$_MOVIE_BY_ID","keyword","$56ca17bb174b0ce3$var$_MOVIE_BY_KEYWORD","resetPage","_pageToFetch","queryToFetch","_queryToFetch","num","constructor","$da4b248c00322402$exports","key","enumerable","configurable","writable","$b8b43eeffbc71918$export$9ce721ac312b8a5d","poster_path","title","name","release_date","first_air_date","genre_ids","date","join","$8bb94a9ca314fec5$export$dbb79f87ff4e57c4","genres","vote_average","vote_count","popularity","original_title","overview","map","genre","$1f0dc3b9307be026$var$refs","movies","document","querySelector","pagination","$1f0dc3b9307be026$var$api","$1f0dc3b9307be026$var$modal","onClose","open","markup","body","insertAdjacentHTML","style","overflow","elem","closeIcon","addEventListener","onbackDropClose","onCloseClick","onShow","close","remove","e","target","classList","contains","window","$1f0dc3b9307be026$var$onEscClose","removeEventListener","code","article","closest","fetchSearchMoviesByID","template","fetchTrendingMovies","results","innerHTML","$1f0dc3b9307be026$var$getTranding"],"version":3,"file":"index.d933a059.js.map"}