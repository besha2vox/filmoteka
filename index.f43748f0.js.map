{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_define_property.js","src/js/templates/gallery-template.js","src/js/templates/modal-template.js","src/index.js","src/js/api.js","src/js/modal.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","export function galleryTemplate({\n  id,\n  poster_path,\n  title,\n  name,\n  release_date,\n  first_air_date,\n  genre_ids,\n}) {\n  if (!release_date && !first_air_date) return;\n  const url = `https://image.tmdb.org/t/p/original${poster_path}`;\n  const date = release_date || first_air_date;\n  const genres = genre_ids.join(',');\n\n  return `<li class=\"films-list__item\">\n    <article class=\"films-card\" id=${id}>\n    <div class=\"img-wrapper\">\n      <img width=\"395\" src=${url} alt=${title || name} />\n      </div>\n      <h2 class=\"films-card__title\">${title || name}</h2>\n      <p class=\"films-card__genre\">${genres} | ${date.split('-')[0]}</p>\n    </article>\n  </li>`;\n}\n","export function modalTemplate({\n  poster_path,\n  genres,\n  vote_average,\n  vote_count,\n  popularity,\n  original_title,\n  title,\n  overview,\n}) {\n  const url = `https://image.tmdb.org/t/p/original${poster_path}`;\n  const genresNames = genres.map(genre => genre.name).join(', ');\n\n  return `<div class=\"modal-movie\">\n  <button type=\"button\" class=\"modal__close\">\n  <svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M8 8L22 22\" stroke=\"black\" stroke-width=\"2\"/>\n  <path d=\"M8 22L22 8\" stroke=\"black\" stroke-width=\"2\"/>\n  </svg>\n  </button>\n    <div class=\"modal__img-wrapper\">\n      <img width=\"375\" src=\"${url}\" alt=\"${title}\" />\n    </div>\n    <div class=\"modal-movie__descr\">      \n      <div class=\"modal-movie__info-weapper\">\n      <h2 class=\"modal-movie__title\">${title}</h2>  \n\n      <ul class=\"modal-movie__list list\">\n\n      <li class=\"modal-movie__item\">\n      <p class=\"modal-movie__key\">Vote / Votes </p>\n       <p class=\"modal-movie__value\">\n         <span class=\"modal-movie__value--accent\">${vote_average}</span> / ${vote_count}\n       </p>\n      </li>\n\n      <li class=\"modal-movie__item\">\n       <p class=\"modal-movie__key\">Popularity </p>\n       <p class=\"modal-movie__value\">${popularity}</p>\n      </li>\n\n      <li class=\"modal-movie__item\">\n      <p class=\"modal-movie__key\">Original Title </p>\n       <p class=\"modal-movie__value modal-movie__value--uppercase\">${original_title}</p>\n      </li>\n\n      <li class=\"modal-movie__item\">\n      <p class=\"modal-movie__key\">Genre </p>\n       <p class=\"modal-movie__value\">${genresNames}</p>\n      </li>\n      \n      </ul>  \n\n        <div class=\"modal-movie__about-wrapper\">\n        <p class=\"modal-movie__about\">About</p>\n        <p class=\"modal-movie__overview\">${overview}</p>\n        </div>\n        <div class=\"modal-movie__button-wrapper\">\n          <button class=\"modal-movie__btn\">add to Watched</button>\n          <button class=\"modal-movie__btn\">add to queue</button>\n        </div>\n      </div>\n    </div>\n  </div>`;\n}\n","import { Fetch } from './js/api';\nimport { Modal } from './js/modal';\nimport { galleryTemplate } from './js/templates/gallery-template';\nimport { modalTemplate } from './js/templates/modal-template';\n\nconst refs = {\n  movies: document.querySelector('.films-list'),\n  pagination: document.querySelector('.pagination-list'),\n};\n\nconst api = new Fetch();\nconst modal = new Modal({\n  onShow() {\n    window.addEventListener('keyup', onEscClose);\n  },\n  onClose() {\n    window.removeEventListener('keyup', onEscClose);\n  },\n});\n\nrefs.movies.addEventListener('click', onMovieClick);\n\ngetTranding();\n\nasync function getTranding() {\n  const movies = await api.fetchTrendingMovies();\n  const template = movies.results.map(galleryTemplate).join('');\n\n  refs.movies.innerHTML = template;\n  //   refs.pagination.innerHTML = ;\n}\n\nfunction onEscClose(e) {\n  console.log(e.code);\n  if (e.code !== 'Escape') return;\n  modal.close();\n}\n\nasync function onMovieClick(e) {\n  const article = e.target.closest('.films-card');\n  if (!article) return;\n\n  const movie = await api.fetchSearchMoviesByID(article.id);\n  const markup = modalTemplate(movie);\n  modal.open(markup);\n}\n","//* Тренди ->\n//* https://api.themoviedb.org/3/trending/all/day?api_key=9cca312caffd11f4ae9f11244d585025\n//* Один фільм по id ->\n//* https://api.themoviedb.org/3/movie/{movie_id}?api_key=9cca312caffd11f4ae9f11244d585025&language=en-US\n//* Пошук за ключовими словами ->\n//* https://api.themoviedb.org/3/search/movie?api_key=9cca312caffd11f4ae9f11244d585025&language=en-US&page=1\n\nexport class Fetch {\n  constructor() {\n    this._queryToFetch = '';\n    this._pageToFetch = 1;\n\n    this.BASE_URL = 'https://api.themoviedb.org/3/';\n    this.API_KEY = '9cca312caffd11f4ae9f11244d585025';\n    this.TRENDING_MOVIES = 'trending/all/day';\n    this.MOVIE_BY_ID = 'movie/';\n    this.MOVIE_BY_KEYWORD = 'search/movie';\n  }\n\n  async basicFetch(url) {\n    return await fetch(url)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.status);\n        }\n        return response.json();\n      })\n      .catch(error => {\n        console.log('error', error);\n      });\n  }\n\n  async fetchTrendingMovies() {\n    const url = `${this.BASE_URL}${this.TRENDING_MOVIES}?api_key=${this.API_KEY}&page=${this.pageToFetch}`;\n    return await this.basicFetch(url);\n  }\n\n  async fetchSearchMoviesByID(id) {\n    const url = `${this.BASE_URL}${this.MOVIE_BY_ID}${id}?api_key=${this.API_KEY}`;\n    return await this.basicFetch(url);\n  }\n\n  async fetchIDMoviesByKeyWord(keyword) {\n    const url = `${this.BASE_URL}${this.MOVIE_BY_KEYWORD}?api_key=${this.API_KEY}&page=${this.pageToFetch}&query=${keyword}`;\n    return await this.basicFetch(url);\n  }\n\n  resetPage() {\n    this._pageToFetch = 0;\n  }\n\n  get queryToFetch() {\n    return this._queryToFetch;\n  }\n\n  set queryToFetch(keyword) {\n    this._queryToFetch = keyword;\n  }\n\n  get pageToFetch() {\n    return this._pageToFetch;\n  }\n\n  set pageToFetch(num) {\n    this._pageToFetch = num;\n  }\n}\n","// document.body.style.overflow = '';\n\nexport class Modal {\n  constructor({ onShow, onClose }) {\n    this.onShow = onShow;\n    this.onClose = onClose;\n    this.elem = null;\n    this.closeIcon = null;\n  }\n  onClose() {}\n\n  open(markup) {\n    document.body.insertAdjacentHTML(\n      'beforeend',\n      `<div class=\"backdrop\">${markup}</div>`\n    );\n    document.body.style.overflow = 'hidden';\n    this.elem = document.querySelector('.backdrop');\n    this.closeIcon = document.querySelector('.modal__close');\n\n    this.elem.addEventListener('click', this.onbackDropClose);\n    this.closeIcon.addEventListener('click', this.onCloseClick);\n    this.onShow();\n  }\n\n  close() {\n    const backdrop = document.querySelector('.backdrop');\n    backdrop.remove();\n    document.body.style.overflow = '';\n    console.log('this.onClose();', this.onClose);\n    this.onClose();\n  }\n\n  onbackDropClose = e => {\n    if (!e.target.classList.contains('backdrop')) return;\n    this.close();\n  };\n\n  onCloseClick = e => {\n    this.close();\n  };\n}\n"],"names":["Object","defineProperty","$da4b248c00322402$exports","value","default","obj","key","enumerable","configurable","writable","$b8b43eeffbc71918$export$9ce721ac312b8a5d","id","poster_path","title","name","release_date","first_air_date","genre_ids","date","join","split","$8bb94a9ca314fec5$export$dbb79f87ff4e57c4","genres","vote_average","vote_count","popularity","original_title","overview","map","genre","$1f0dc3b9307be026$var$refs","movies","document","querySelector","pagination","$1f0dc3b9307be026$var$api","async","url","fetch","then","response","ok","Error","status","json","catch","error","console","log","this","BASE_URL","TRENDING_MOVIES","API_KEY","pageToFetch","basicFetch","MOVIE_BY_ID","keyword","MOVIE_BY_KEYWORD","resetPage","_pageToFetch","queryToFetch","_queryToFetch","num","constructor","$1f0dc3b9307be026$var$modal","onClose","open","markup","body","insertAdjacentHTML","style","overflow","elem","closeIcon","addEventListener","onbackDropClose","onCloseClick","onShow","close","remove","$parcel$interopDefault","e","target","classList","contains","window","$1f0dc3b9307be026$var$onEscClose","removeEventListener","code","article","closest","fetchSearchMoviesByID","template","fetchTrendingMovies","results","innerHTML","$1f0dc3b9307be026$var$getTranding"],"version":3,"file":"index.f43748f0.js.map"}